<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Agreements</title>

  <script type="text/javascript" src="vendor/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="vendor/bootstrap/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://cdn.rawgit.com/ethereum/web3.js/develop/dist/web3.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
   <script src="static/js/index1.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">


      <style type="text/css">
      .footer {
             position: fixed;
             left: 0;
             bottom: 0;
             width: 100%;
             background-color: #121a39;
             color: white;
             text-align: center;
    }
      </style>

</head>


<body style="background-image:linear-gradient(-90deg,#42105f,#1e4354);">
<nav class="navbar navbar-inverse " style="background:#121a39">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#" style="color: white">Drent</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/"><span class="glyphicon glyphicon-home"> Home</a></li>
              <li><a href="/agreements"><span class="glyphicon glyphicon-list-alt"> Agreements</a></li>
             <li><a href="logout"><span class="glyphicon glyphicon-log-out"> logout</a></li>
            </span></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
       <div class="container">
            <div style="color:white; align:center">
                <h3><span class="fas fa-file-contract"> Agreement Signed!</span></h3>
                <hr class="col-md-2">
                <br>
                <br>
                <br>
            </div>
        </div>

       <div class="container">
         <div class="row ">
           <div class="col-md-9" style="border:4px solid skyblue; color:white">

                <table class="table table-condensed">
              <tbody>
                <tr >
                  <td><h4>Name:</h4></td>
                  <td><h4 id="pname"></h4></td>
                </tr>
                <tr>
                  <td><h4>Description:</h4></td>
                  <td><h4 id="description"></h4></td>
                </tr>
                <tr>
                  <td><h4>City:</h4></td>
                  <td><h4  id="lcity"></h4></td>
                </tr>
                <tr>
                  <td><h4>Address:</h4></td>
                  <td><h4 id="location"><h4></td>
                </tr>
                <tr>
                  <td><h4>Security Deposit:</h4></td>
                  <td><h4 id="securityDeposit"><h4></td>
                </tr>
                <tr>
                  <td><h4>Payment Type:</h4></td>
                  <td><h4 id="paymentType"></h4></td>
                </tr>
                <tr>
                  <td><h4>Notice Period (days): </h4></td>
                  <td><h4 id="noticePeriodDays"></h4></td>
                </tr>
                <tr>
                  <td><h4>Tenant:</h4></td>
                  <td><h4  id="tenantAddress"></h4></td>
                </tr>
                <tr>
                  <td><h4>Landlord:</h4></td>
                  <td><h4 id="landlordAddress"></h4></td>
                </tr>
                <tr>
                  <td><h4>Status:</h4></td>
                  <td><h4  id="status"></h4></td>
                </tr>
              </tbody>
            </table>

           </div>
           <br><br>

         </div>
         <br>
         <button type="button" class="btn btn-success" onclick="giveNotice()">Give Notice Period</button>
         <button type="button" class="btn btn-warning" onclick="vacate()">Vacate</button>
          <button type="button" class="btn btn-primary" onclick="checkWSD()">Am I Eligble for SD?</button>
      </div>
<br><br>
<br><br><br>
<br><br><br><br>
<footer class="footer">
      <div class="container">
      <br>
        <p class="text-muted" align="center" style="color: white">Copyright &copy; <code>Drent</code> 2019</p>
      </div>
    </footer>

    <script type="text/javascript">
    $(document).ready(function() {
      var eth = web3.eth.defaultAccount;
      $("#tenantAddress").html(eth);
      getAgreementDetails(eth);
      //alert(mani);
    });
    function getAgreementDetails(eth)
    {
      Tenant.GAD_pname(eth, function(err, res){
        otherfunction(res, "#pname");
      });
      Tenant.GAD_securityDeposit(eth, function(err, res){
        otherfunction(res['c'][0], "#securityDeposit");
      });
      Tenant.GAD_paymentType(eth, function(err, res){
         otherfunction(res, "#paymentType");
      });
      Tenant.GAD_noticePeriod(eth, function(err, res){
        console.log(res);
        otherfunction(res, "#noticePeriod");
      });
      Tenant.GAD_noticePeriodDays(eth, function(err, res){
        console.log(res);
        otherfunction(res['c'], "#noticePeriodDays");
      });
      Tenant.GAD_landlordAddress(eth, function(err,res){
        Landlord.GPD_lCity(res,0,function(err,res){
          otherfunction(res, "#lcity");
        });
        Landlord.GPD_description(res,0, function(err,res){
          otherfunction(res, "#description");
        });
        Landlord.GPD_propertyAddress(res,0, function(err,res){
          otherfunction(res, "#location");
        });
         otherfunction(res,"#landlordAddress");
      });
      Tenant.GAD_status(eth, function(err,res){
         otherfunction(res, "#status");
      });

    }

     function otherfunction(res, id) {
       $(id).html(res);
       console.log(res);
     }
     function giveNotice(){
       eth = web3.eth.defaultAccount;
       Tenant.GAD_noticePeriod(eth, function(err,res){
         if(res){
           alert("Notice period Given longback!!");
         }
         else{
           Tenant.giveNotice(eth,function(err,res){
             console.log(res)
             alert("NoticePeriod Given");
           });
         }
       });

     }
     function vacate(){
       eth = web3.eth.defaultAccount;
       Tenant.vacate(eth, function(err,res){
         console.log(res);
         //alert(res);
          Tenant.GAD_landlordAddress(eth, function(err,res){
            Landlord.changeStatus(res,0,"open",function(err,res){
              console.log(res);
            });
          });
       });
     }
     function checkWSD(){
       eth = web3.eth.defaultAccount;
       Tenant.withDrawSD(eth,function(err,res){
        if(res)
        {
          alert("Eligible");
        }
        else{
          alert("Not Eligible");
        }
       });
     }

    </script>
</body>
</html>
